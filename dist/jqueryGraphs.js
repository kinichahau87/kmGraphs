$.fn.KmGraphs=function(yDomain,xDomain,data,options){function __gStandardDeviation(t){var a=0;for(var e in t)t.hasOwnProperty(e)&&(a+=t[e]);var n=a/t.length,i=0;for(var e in t)t.hasOwnProperty(e)&&(i+=Math.pow(t[e]-n,2));var o=i/t.length;return Math.floor(Math.sqrt(o))}function __gFindSmallest(t){for(var a=Math.pow(2,32)-1,e=0;e<t.length;e++)t[e]<a&&(a=t[e]);return a}function __gFindBiggest(t){for(var a=Math.pow(-2,31)-1,e=0;e<t.length;e++)t[e]>a&&(a=t[e]);return a+yDomain.inc}function prepareGraph(){fontSizeRatio=canvasWidth*canvasHeight/(mCanvasWidthConst*mCanvasHeightConst),fontSize+=mFontPercentRatioConst*fontSizeRatio,fontDerv=(mFontPaddingConst-fontSize)/fontSize;for(var l=0;l<data.length;l++)data[l]>maxRectangleHeight&&(maxRectangleHeight=data[l]);canvasHeight>maxRectangleHeight?heightRatio=canvasHeight*mCanvasRatioPercentConst/maxRectangleHeight:(operand="/",heightRatio=maxRectangleHeight/(canvasHeight*mCanvasRatioPercentConst)),canvasWidth>maxRectangleWidth?widthRatio=canvasWidth*mCanvasRatioPercentConst/maxRectangleWidth:(wOperand="/",recLeftOperand="+",widthRatio=maxRectangleWidth/(canvasWidth*mCanvasRatioPercentConst)),graphBottom=canvasHeight-5,rectWidth=eval(rectWidth+wOperand+widthRatio),$(mGlobalThis).append('<svg id="svgCanvas" width="'+canvasWidth+'" height="'+canvasHeight+'"></svg>');var lineH=$(document.createElementNS("http://www.w3.org/2000/svg","line")).attr({id:"lineHorizon",x1:recLeft-20,y1:graphBottom-graphAllPadding,x2:numberofElements*(rectWidth+10)+numberofElements*recPadding+10,y2:graphBottom-graphAllPadding,style:"stroke:black;stroke-width:2"});$("#svgCanvas").append(lineH),recLeft=35;var lineV=$(document.createElementNS("http://www.w3.org/2000/svg","line")).attr({id:"lineVerizon",x1:recLeft+5,y1:graphBottom,x2:recLeft+5,y2:10,style:"stroke:black;stroke-width:2"});$("#svgCanvas").append(lineV);for(var tickBottom=graphBottom-graphAllPadding,j=yDomain.start;j<=numberOfTicks;j++){var lineTick=$(document.createElementNS("http://www.w3.org/2000/svg","line")).attr({id:"lineTick",x1:recLeft+2,y1:tickBottom,x2:recLeft+8,y2:tickBottom,style:"stroke:black;stroke-width:1"}),tickNumber=$(document.createElementNS("http://www.w3.org/2000/svg","text")).attr({id:"label"+j,x:recLeft-graphAllPadding,y:tickBottom+3,fill:"black",style:"font-size:"+fontSize});tickNumber.append(j*yDomain.inc),tickBottom-=yDomain.inc*heightRatio,$("#svgCanvas").append(lineTick),$("#svgCanvas").append(tickNumber)}}var mGlobalThis=this;if(null!=xDomain&&(void 0==xDomain.end||null==xDomain.end))throw new Error('Your parameter "xDomain" does not have the property "end".');if(data.length!=xDomain.end)throw new Error('Your parameter "data" has eighter too many or not have enouch elements: ');null!=yDomain&&(0!=yDomain.inc&&void 0!=yDomain.inc||(yDomain.inc=__gStandardDeviation(data)),void 0==yDomain.start&&(yDomain.start=0),void 0==yDomain.end&&(yDomain.end=__gFindBiggest(data)));var rectWidth=35,recLeft=55,recPadding=5,numberofElements=xDomain.end/xDomain.inc,numberOfTicks=yDomain.end/yDomain.inc,color="red",canvasWidth=900,canvasHeight=1e3,maxRectangleHeight=0,maxRectangleWidth=45*data.length,fontSizeRatio,fontSize=10,fontDerv=10,heightRatio=1,widthRatio=1,wOperand="*",operand="*",recLeftOperand="-",graphBottom,barOpacity=.75,graphAllPadding=15,lineChartRadius=4,lineChartPointColor="red",defaultStrokeWidth=1,mCanvasWidthConst=900,mCanvasHeightConst=1e3,mFontPercentRatioConst=8,mFontPaddingConst=10,mCanvasRatioPercentConst=.85;return this.drawBarGraph=function(){void 0==options&&null==options||(void 0!=options.rectangleWidth&&(rectWidth=options.rectangleWidth),void 0!=options.rectanglePadding&&(recPadding=options.rectanglePadding),void 0!=options.color&&(color=options.color),void 0!=options.canvasWidth&&(canvasWidth=options.canvasWidth),void 0!=options.canvasHeight&&(canvasHeight=options.canvasHeight));try{prepareGraph(),recLeft=rectWidth+graphAllPadding;for(var i=xDomain.start;i<numberofElements;i++){var dataHeight="data[i]"+operand+heightRatio,bar=$(document.createElementNS("http://www.w3.org/2000/svg","rect")).attr({id:"rec"+i,x:recLeft,y:graphBottom-graphAllPadding,width:rectWidth,style:"stroke-width:2",rx:"8",ry:"8",height:eval(dataHeight),stroke:"black",fill:color,transform:"rotate(180,"+(recLeft+graphAllPadding)+","+(graphBottom-15)+")",opacity:barOpacity}),group=$(document.createElementNS("http://www.w3.org/2000/svg","g")).attr({id:"g"+i}),mon=$(document.createElementNS("http://www.w3.org/2000/svg","text")).attr({id:"label"+i,x:recLeft+rectWidth*fontDerv+graphAllPadding*fontSizeRatio,y:graphBottom-eval(dataHeight)-25,fill:"black",style:"font-size:"+fontSize});if(xDomain.labels&&xDomain.labels.length==data.length){var lables=$(document.createElementNS("http://www.w3.org/2000/svg","text")).attr({id:"glabel"+i,x:recLeft+rectWidth*fontDerv+graphAllPadding*fontSizeRatio,y:graphBottom,fill:"black",style:"font-size:"+fontSize});lables.append(xDomain.labels[i]),$("#svgCanvas").append(lables)}var prefix=null!=options&&void 0!=options.dataPrefix?options.dataPrefix:"",postfix=null!=options&&void 0!=options.dataPostfix?options.dataPostfix:"";mon.append(prefix+data[i]+postfix),recLeft=recLeft+rectWidth+recPadding,$("#svgCanvas").append(group),$("#g"+i).append(bar),$("#g"+i).append(mon)}}catch(t){console.log(t)}return this},this.drawLineGraph=function(){void 0==options&&null==options||(void 0!=options.color&&(color=options.color),void 0!=options.pointRadius&&(lineChartRadius=options.pointRadius),void 0!=options.pointColor&&(lineChartPointColor=options.pointColor),void 0!=options.lineWidth&&(defaultStrokeWidth=options.lineWidth)),prepareGraph(),recLeft+=rectWidth;for(var mBeginPoint=[recLeft+graphAllPadding-rectWidth,graphBottom-graphAllPadding],mEndPoint=[],i=xDomain.start;i<numberofElements;i++){mEndPoint.push(recLeft),mEndPoint.push(eval("data[i]"+operand+heightRatio));var lineV=$(document.createElementNS("http://www.w3.org/2000/svg","line")).attr({id:"lineVerizon"+i,x1:mBeginPoint[0],y1:mBeginPoint[1],x2:mEndPoint[0],y2:mEndPoint[1],style:"stroke:"+color+";stroke-width:"+defaultStrokeWidth+";"}),linePoint=$(document.createElementNS("http://www.w3.org/2000/svg","circle")).attr({id:"lineVerizonPoint"+i,cx:mEndPoint[0],cy:mEndPoint[1],r:lineChartRadius,style:"fill:"+lineChartPointColor+";"}),mon=$(document.createElementNS("http://www.w3.org/2000/svg","text")).attr({id:"label"+i,x:mEndPoint[0]+3,y:mEndPoint[1]+3,fill:"black",style:"font-size:"+fontSize});if(xDomain.labels&&xDomain.labels.length==data.length){var lables=$(document.createElementNS("http://www.w3.org/2000/svg","text")).attr({id:"glabel"+i,x:recLeft,y:graphBottom,fill:"black",style:"font-size:"+fontSize});lables.append(xDomain.labels[i]),$("#svgCanvas").append(lables)}$("#svgCanvas").append(lineV),$("#svgCanvas").append(linePoint),$("#svgCanvas").append(mon),recLeft+=rectWidth,mBeginPoint=mEndPoint.slice(),mEndPoint=[]}return this},this},$(function(){var t={start:0,end:75},a={start:0,end:5,labels:["Jan","Feb","Mar","Apr","May"],inc:1},e=[25,75,50,5,31],n={canvasWidth:500,canvasHeight:500,dataPostfix:"%"};$("#drawBoard").KmGraphs(t,a,e,n).drawLineGraph()});